config:
  depl: ~/dev/deployer
  dist: ~/dev/dist
  site: ~/dev/deployer.org

hosts:
  deployer.org: ~

tasks:
  pull:
    script:
      - cd {{depl}}
      - git pull
      - git status

  test:
    script:
      - cd {{depl}}
      - composer install
      - composer test
      - bin/build
      - php deployer.phar -v

  release:composer:
    script:
      - cd {{depl}}
      - bin/release

  release:phar:
    script:
      - .

  release:dist:
    script:
      - .

  release:
    - release:composer
    - release:phar
    - release:dist

before:
  release:
    - pull
    - test
